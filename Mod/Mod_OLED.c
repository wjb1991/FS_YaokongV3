//*******************************************************
//CONTROL IC:SSD1306
//Model style:128*64
//1/64 duty    Vop:14.0V  VDD:3.3V  1/11bias
//FINISH DATA:
//SERIEA:6800/8080/SPI
//*******************************************************

//#include <stdio.h>        
//#include <ctype.h>
//#include <string.h>

#include "Bsp.h"


#define Uchar unsigned char
#define Uint  unsigned int

#define MHz 12                      //晶振频率

#define  Write_Command     Write_Command_SPI
#define  Write_Data        Write_Data_SPI



const unsigned char bkgpic[] = {
/*--  调入了一幅图像：D:\Wangjiangbo\Desktop\无标题.bmp  --*/
/*--  宽度x高度=128x32  --*/
0x00,0x3F,0x30,0x36,0x76,0x76,0x76,0x76,0x76,0x36,0x30,0x3F,0x00,0x00,0x3F,0x20,
0x2F,0x2F,0x20,0x3F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x1C,0x7F,0x41,0x5D,
0x5D,0x41,0x5D,0x5D,0x41,0x5D,0x5D,0x41,0x5D,0x5D,0x41,0x5D,0x5D,0x41,0x7F,0x00,
0x00,0xFF,0x00,0xDB,0xDB,0xDB,0xDB,0xDB,0xDB,0xDB,0x00,0xFF,0x00,0x00,0xFF,0x00,
0xFF,0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,
0x01,0x03,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x03,
0x07,0x06,0x00,0x01,0x01,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0xFF,0x00,0x6D,0x6D,0x6D,0x6D,0x6D,0x6D,0x6D,0x00,0xFF,0x00,0x00,0xFF,0x00,
0xFF,0xFF,0x00,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0xFF,0xFF,0xFF,0x01,0x0B,0x0E,0x0C,0x08,0x08,0x00,0x08,0x0B,0x0F,0x0E,0x0C,
0x0F,0x07,0x0E,0x0C,0x0F,0x07,0x00,0x00,0x00,0x00,0x00,0x03,0x0F,0x3E,0xF8,0xE0,
0x80,0x00,0x00,0x00,0x00,0xFF,0xFF,0x0C,0x08,0x08,0x0C,0x0F,0x07,0x00,0x00,0x00,
0x00,0xFE,0x06,0xB6,0xB6,0xB6,0xB6,0xB6,0xB6,0xB6,0x06,0xFE,0x00,0x00,0xFE,0x02,
0xFA,0xFA,0x02,0xFE,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x08,
0x08,0xF8,0xF8,0xF8,0x98,0xC0,0xE8,0x78,0x38,0x18,0x00,0x08,0xF8,0xF8,0x08,0x08,
0xF8,0xF8,0x08,0x08,0xF8,0xF8,0x08,0x0A,0x0E,0x3E,0xF8,0xE0,0x80,0x00,0x00,0x00,
0x00,0x00,0x00,0x08,0x08,0xF8,0xF8,0x08,0x00,0x00,0x08,0xF8,0xF8,0x18,0x08,0x00,
};

const unsigned char numCode[10][64] =
{
/*--  文字:  0  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x00,0x00,0x01,0x03,0x03,0x03,0x02,0x03,0x03,0x01,0x00,0x00,0x00,0x00,
0x00,0x1F,0x7F,0xFF,0xFE,0xC0,0x00,0x00,0x00,0x00,0xC0,0xFF,0xFF,0x7F,0x1F,0x00,
0x00,0xFC,0xFF,0xFF,0x3F,0x01,0x00,0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0xF8,0x00,
0x00,0x00,0x00,0x80,0xC0,0xE0,0x60,0x60,0x60,0x60,0xE0,0xC0,0x80,0x00,0x00,0x00,
/*--  文字:  1  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x01,0x03,0x03,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x80,0x80,0x80,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x00,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x20,0x20,0x20,0xE0,0xE0,0xE0,0xE0,0x60,0x20,0x20,0x00,0x00,0x00,
/*--  文字:  2  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x00,0x01,0x03,0x03,0x03,0x02,0x02,0x03,0x03,0x03,0x01,0x00,0x00,0x00,
0x00,0x30,0xF8,0xF8,0xF8,0x10,0x00,0x00,0x00,0x01,0x87,0xFF,0xFF,0xFE,0x00,0x00,
0x00,0x00,0x01,0x03,0x07,0x0E,0x1C,0x38,0x70,0xE0,0xC0,0x80,0x03,0x03,0x02,0x00,
0x00,0xE0,0xE0,0xE0,0x60,0x60,0x60,0x60,0x60,0x60,0x60,0xE0,0xE0,0xE0,0x00,0x00,
/*--  文字:  3  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x00,0x01,0x03,0x03,0x02,0x02,0x03,0x03,0x03,0x01,0x00,0x00,0x00,0x00,
0x00,0x00,0xF0,0xF0,0xF0,0x01,0x01,0x03,0x03,0x87,0xFF,0xFE,0xFC,0x70,0x00,0x00,
0x00,0x03,0x07,0x07,0x07,0x00,0x00,0x00,0x80,0x80,0xC0,0xFF,0xFF,0x3F,0x0E,0x00,
0x00,0x00,0xC0,0xC0,0xE0,0x60,0x20,0x20,0x60,0x60,0xE0,0xC0,0xC0,0x80,0x00,0x00,
/*--  文字:  4  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x01,0x07,0x07,0x07,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x01,0x07,0x1E,0x3C,0xF0,0xFF,0xFF,0xFF,0xFF,0x00,0x00,0x00,0x00,
0x10,0x38,0xF8,0xF8,0x98,0x18,0x18,0x18,0xFF,0xFF,0xFF,0xFF,0x18,0x18,0x10,0x00,
0x00,0x00,0x00,0x00,0x00,0x20,0x60,0x60,0xE0,0xE0,0xE0,0xE0,0x60,0x60,0x20,0x00,
/*--  文字:  5  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x00,0x00,
0x00,0x00,0x7F,0xFF,0xFF,0x06,0x06,0x04,0x04,0x06,0x07,0x07,0x03,0x01,0x00,0x00,
0x00,0x03,0x87,0x87,0x87,0x00,0x00,0x00,0x00,0x00,0x01,0xFF,0xFF,0xFF,0x3C,0x00,
0x00,0x00,0xC0,0xC0,0xE0,0x60,0x60,0x20,0x60,0x60,0xE0,0xE0,0xC0,0x80,0x00,0x00,
/*--  文字:  6  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x00,0x00,0x01,0x03,0x03,0x03,0x02,0x02,0x03,0x03,0x01,0x00,0x00,0x00,
0x00,0x0F,0x7F,0xFF,0xFF,0xC3,0x03,0x03,0x02,0x03,0xC3,0xC3,0xC1,0xC0,0x00,0x00,
0x00,0xFE,0xFF,0xFF,0xEF,0x80,0x00,0x00,0x00,0x00,0x80,0xFF,0xFF,0xFF,0x7E,0x00,
0x00,0x00,0x80,0xC0,0xE0,0xE0,0x60,0x60,0x20,0x60,0x60,0xE0,0xC0,0x80,0x00,0x00,
/*--  文字:  7  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x03,0x00,0x00,
0x00,0x60,0xE0,0xE0,0x80,0x00,0x00,0x01,0x07,0x1F,0x7E,0xF0,0xC0,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0x0F,0x7F,0xFF,0xFF,0xC0,0x00,0x00,0x00,0x00,0x00,0x00,
0x00,0x00,0x00,0x00,0x00,0xE0,0xE0,0xE0,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
/*--  文字:  8  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x00,0x01,0x03,0x03,0x03,0x02,0x02,0x03,0x03,0x03,0x01,0x00,0x00,0x00,
0x00,0x78,0xFC,0xFE,0xCF,0x07,0x03,0x03,0x01,0x01,0x03,0xFF,0xFE,0xFC,0x30,0x00,
0x00,0x1F,0x7F,0xFF,0xE0,0xC0,0x80,0x80,0xC0,0xE0,0xE0,0xFB,0x7F,0x3F,0x0E,0x00,
0x00,0x00,0xC0,0xC0,0xE0,0x60,0x60,0x20,0x20,0x60,0x60,0xE0,0xC0,0x80,0x00,0x00,
/*--  文字:  9  --*/
/*--  幼圆23;  此字体下对应的点阵为：宽x高=16x31   --*/
/*--  高度不是8的倍数，现调整为：宽度x高度=16x32  --*/
0x00,0x00,0x00,0x01,0x03,0x03,0x03,0x02,0x02,0x03,0x03,0x01,0x00,0x00,0x00,0x00,
0x00,0x7F,0xFF,0xFF,0xE1,0x00,0x00,0x00,0x00,0x00,0x80,0xFF,0xFF,0x7F,0x1F,0x00,
0x00,0x80,0xC1,0xE1,0xE1,0x61,0x60,0x20,0x60,0x60,0xC7,0xFF,0xFF,0xFE,0xF0,0x00,
0x00,0x00,0xC0,0xE0,0xE0,0xE0,0x20,0x60,0x60,0xE0,0xC0,0xC0,0x00,0x00,0x00,0x00,

};

const unsigned char BoardChrgeIcon[8] =
{
/*--  调入了一幅图像：这是您新建的图像  --*/
/*--  宽度x高度=8x8  --*/
0x00,0x1C,0x7E,0x1F,0x1F,0x7E,0x1C,0x00,
};


const unsigned char ChrgeIcon[8] =
{
/*--  调入了一幅图像：这是您新建的图像  --*/
/*--  宽度x高度=8x8  --*/
0x00,0x08,0x19,0x3B,0x6E,0x4C,0x08,0x00,

};

const unsigned char RfStateIcon[8] = 
{
/*--  调入了一幅图像：这是您新建的图像  --*/
/*--  宽度x高度=8x8  --*/
0x00,0x0F,0x38,0x23,0x6C,0x4B,0x54,0x55,

};

const unsigned char HighSpeedIcom[8] = {
/*--  调入了一幅图像：这是您新建的图像  --*/
/*--  宽度x高度=8x8  --*/
0x41,0x7F,0x7F,0x08,0x49,0x7F,0x7F,0x41,
};

const unsigned char LowSpeedIcom[8] = {
/*--  调入了一幅图像：这是您新建的图像  --*/
/*--  宽度x高度=8x8  --*/
0x00,0x41,0x7F,0x7F,0x03,0x03,0x01,0x00,
};

const unsigned char PatrolIcom[8] = {
/*--  调入了一幅图像：这是您新建的图像  --*/
/*--  宽度x高度=8x8  --*/
0x00,0x41,0x7F,0x7F,0x44,0x44,0x6C,0x38,
};

const unsigned char ClearIcom[8] = {
/*--  调入了一幅图像：这是您新建的图像  --*/
/*--  宽度x高度=8x8  --*/
0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};


void Delay_1ms(unsigned char delay); // 基准为1ms的延时函数,最大255ms
void Init_Lcd(void);
void Display(Uchar Data1,Uchar Data2);
void Display1(Uchar Data1,Uchar Data2);
void DisplayPicture(Uchar *PIC);
void Delay(Uint t);
void Write_Command_SPI(Uchar Command);
void Write_Data_SPI(Uchar Data);

BOOL Mod_OLEDClear(void);

//*******************************************************
//函数名称：Init_LCD
//功能：设置LCD所用芯片中各寄存器的值
//参数：无
//*******************************************************
void Mod_OLEDInit(void)
{   
    
	Bsp_RES_High();
	Delay_1ms(100);
	Bsp_RES_Low();
	Delay_1ms(100);
	Bsp_RES_High();
	Delay_1ms(100);

	Write_Command(0xAE);//set display display ON/OFF,AFH/AEH

	Write_Command(0x40);//set display start line:COM0

	Write_Command(0x20);//set memory addressing mode
	Write_Command(0x02);//page addressing mode

	Write_Command(0x81);//set contrast control
	Write_Command(0x7F);

	Write_Command(0xAD);//External or internal Vcomh or Iref select
    Write_Command(0x00);//Vcomh:internal  Iref:External

    Write_Command(0xA0);//set segment re-map		

	Write_Command(0xA4);//entire display on: A4H:OFF/A5H:ON

	Write_Command(0xA6);//set normal/inverse display: A6H:normal/A7H:inverse

	Write_Command(0xA8);//set multiplex ratio
	Write_Command(0x1F);//32

	Write_Command(0xC0);//set com output scan direction

	Write_Command(0xD3);//set display  offset
	Write_Command(0x00);//

	Write_Command(0xDA);//set seg pins hardware configuration
	Write_Command(0x12);//

	Write_Command(0xD5);//set display  clock divide ratio/oscillator frequency
	Write_Command(0x80);//FR=105HZ

	Write_Command(0xD9);//set pre-charge period
	Write_Command(0x22);//

	Write_Command(0xDB);//set vcomh deselect level
	Write_Command(0x30);//0.83*VCC	
	
	Write_Command(0x8D);//charge pump setting
	Write_Command(0x15);//enable charge pump, select 7.5V charge pump output
	Delay_1ms(100);		

    Mod_OLEDClear();
    
	Write_Command(0xAF);//set display display ON/OFF,AFH/AEH
}


//*******************************************************
//函数名称：Delay_1ms
//功能：延时函数,基准值为1ms,最大255毫秒 
//参数：delay
//*******************************************************
void Delay_1ms(unsigned char delay)
{ 
    Bsp_DelayMs(delay);
}

//*******************************************************
//函数名称：Delay
//功能：延时函数
//参数：t
//*******************************************************
void Delay(Uint t)
{
  unsigned char i;
  unsigned int j;
  for(i=0;i<=t;i++)
  for(j=0;j<2000;j++);
}

void DelaySpi(unsigned char t)
{
    unsigned char i;
    for(i=0;i<=t;i++){}
}


//*******************************************************
//函数名称：Write_Command_SPI
//功能：串口写指令
//参数：Command
//*******************************************************
void Write_Command_SPI(Uchar Command)
{
    int i;
    Bsp_CS_Low();
    Bsp_DC_Low();
    DelaySpi(20);
    for(i=0;i<8;i++)
    {
        Bsp_SCLK_Low();
                
        DelaySpi(10);
        if((Command&0x80)==0)
            Bsp_SDIN_Low();
        else
            Bsp_SDIN_High();
        
        DelaySpi(10);
        
        Bsp_SCLK_High();
        
        DelaySpi(20);
        Command=Command<<1;
    }
    //Bsp_CS_High();//新加
 }

//*******************************************************
//函数名称：Write_Data_SPI
//功能：串口写数据
//参数：Data
//*******************************************************
void Write_Data_SPI(Uchar Data)
{
    int i;
    Bsp_CS_Low();
    Bsp_DC_High();
    DelaySpi(20);
    for(i=0;i<8;i++)
    {
        Bsp_SCLK_Low();
        DelaySpi(10);
        if((Data&0x80)==0)
            Bsp_SDIN_Low();
        else
            Bsp_SDIN_High();
        DelaySpi(10);
        Bsp_SCLK_High();
        DelaySpi(20);
        Data=Data<<1;
    }
    //Bsp_CS_High();//新加
}
 
BOOL Mod_OLEDDisplay(INT8U* p_Data)
{
    int i,j;     
    for(i = 0; i < 4; i++)
    {	
        Write_Command(0xB0+3-i);//set pageaddress start adress
        Write_Command(0x00);  //set lower column start address
        Write_Command(0x10);  //set higher column start address	  
        for(j=0;j<128;j++)
        { 	      
            Write_Data(*p_Data++);
        }	  
    }
    return TRUE;
}


BOOL Mod_OLEDDispNum_32x16(INT8U line,INT8U num)
{
    int i,j;   
    INT8U* p_Data = (INT8U*)&numCode[num][0];
    INT8U line2 = line/16;
    INT8U line1 = line%16;
    for(i = 0; i < 4; i++)
    {	
        Write_Command(0xB0+3-i);//set pageaddress start adress
        Write_Command(0x00+line1);  //set lower column start address
        Write_Command(0x10+line2);  //set higher column start address	  
        for(j=0;j<16;j++)
        { 	      
            Write_Data(*p_Data++);
        }	  
    }
    return TRUE;
}

BOOL Mod_OLEDDispIcon_8x8(INT8U line,INT8U page,INT8U* p_Data)
{
    int j;
    INT8U line2 = line/16;
    INT8U line1 = line%16;

    Write_Command(0xB0+3-page);//set pageaddress start adress
    Write_Command(0x00+line1);  //set lower column start address
    Write_Command(0x10+line2);  //set higher column start address	  
    for(j=0;j<8;j++)
    { 	      
        Write_Data(*p_Data++);
    }	  

    return TRUE;
}

BOOL Mod_OLEDClear(void)
{
    int i,j;     
    for(i = 0; i < 4; i++)
    {	
        Write_Command(0xB0+3-i);//set pageaddress start adress
        Write_Command(0x00);  //set lower column start address
        Write_Command(0x10);  //set higher column start address	  
        for(j=0;j<128;j++)
        { 	      
            Write_Data(0x00);
        }	  
    }
    return TRUE;
}


BOOL Mod_OLEDDisp_BatteryBar(INT8U PowLeven)
{
    static INT8U s_PowLeven = 5;
    int i,j;
    INT8U line;

    INT8U line2;
    INT8U line1;
    
    if(s_PowLeven != PowLeven)
    {
        s_PowLeven = PowLeven;
        for(i = 0; i < 5; i++)
        {
            line = 123 - i* 3;

            line2 = line/16;
            line1 = line%16;  

            Write_Command(0xB0+3-0);//set pageaddress start adress
            Write_Command(0x00+line1);  //set lower column start address
            Write_Command(0x10+line2);  //set higher column start address   

            if(i >= PowLeven)
            {
                for(j=0;j<2;j++)
                { 	      
                  Write_Data(0x41);
                }
            }
            else
            {
                for(j=0;j<2;j++)
                { 	      
                  Write_Data(0x5D);
                }
            }
        } 
    }
    return TRUE;
}

BOOL Mod_OLEDDisp_PowBar(INT8U PowLeven)
{
    static INT8U s_PowLeven = 6;
    int i,j;
    INT8U line;
    INT8U line2;
    INT8U line1;
    
    INT8U data = 0;
    
    if(s_PowLeven != PowLeven)
    {
        s_PowLeven = PowLeven;
        line = 3;
        line2 = line/16;
        line1 = line%16;  
       
        Write_Command(0xB0+3-3);    //set pageaddress start adress
        Write_Command(0x00+line1);  //set lower column start address
        Write_Command(0x10+line2);  //set higher column start address           
        if(PowLeven > 0)
        {
            data = 0x76;
        }
        else
        {
            data = 0x06;
        }
        for(j=0;j<7;j++)
        { 	      
            Write_Data(data);
        }
        
        
        Write_Command(0xB0+3-2);    //set pageaddress start adress
        Write_Command(0x00+line1);  //set lower column start address
        Write_Command(0x10+line2);  //set higher column start address 
        if(PowLeven < 2)
        {
            data = 0x00;        //PowLeven = 1
        }
        else if(PowLeven < 3)
        {
            data = 0x07;        //PowLeven = 2
        }
        else
        {
            data = 0x77;        //PowLeven = 3
        }
        for(j=0;j<7;j++)
        { 	      
            Write_Data(data);
        }


        Write_Command(0xB0+3-1);    //set pageaddress start adress
        Write_Command(0x00+line1);  //set lower column start address
        Write_Command(0x10+line2);  //set higher column start address 
        if(PowLeven < 4)
        {
            data = 0x00;        //PowLeven = 3
        }
        else if(PowLeven < 5)
        {
            data = 0x07;        //PowLeven = 4
        }
        else
        {
            data = 0x77;        //PowLeven = 5
        }
        for(j=0;j<7;j++)
        { 	      
            Write_Data(data);
        }
        
        Write_Command(0xB0+3-0);    //set pageaddress start adress
        Write_Command(0x00+line1);  //set lower column start address
        Write_Command(0x10+line2);  //set higher column start address 
        if(PowLeven != 6)
        {
            data = 0xF0;        //PowLeven = 3
        }
        else
        {
            data = 0xF7;        //PowLeven = 4
        }
        
        for(j=0;j<7;j++)
        { 	      
            Write_Data(data);
        }
        
    }
    return TRUE;
}

BOOL Mod_OLEDDisp_ChrgeIcon(BOOL State)
{
    static BOOL s_State = FALSE;
    if(s_State!=State)
    {
        s_State = State;
        if(State == TRUE)
        {
            Mod_OLEDDispIcon_8x8(96,0,(INT8U*)ChrgeIcon);
        }
        else
        {
            Mod_OLEDDispIcon_8x8(96,0,(INT8U*)ClearIcom);
        }
        return TRUE;
    }
    else
        return FALSE;
}

BOOL Mod_OLEDDisp_RfStateIcon(BOOL State)
{
    static BOOL s_State = FALSE;
    if(s_State!=State)
    {
        s_State = State;
        if(State == TRUE)
        {
            Mod_OLEDDispIcon_8x8(84,0,(INT8U*)RfStateIcon);
        }
        else
        {
            Mod_OLEDDispIcon_8x8(84,0,(INT8U*)ClearIcom);
        }
        return TRUE;
    }
    else
        return FALSE;
}

BOOL Mod_OLEDDisp_BoardChrgeIcon(BOOL State)
{
    static BOOL s_State = FALSE;
    if(s_State!=State)
    {
        s_State = State;
        if(State == TRUE)
        {
            Mod_OLEDDispIcon_8x8(24,0,(INT8U*)BoardChrgeIcon);
        }
        else
        {
            Mod_OLEDDispIcon_8x8(24,0,(INT8U*)ClearIcom);
        }
        return TRUE;
    }
    else
        return FALSE;
}

BOOL Mod_OLEDDisp_HighSpeedIcom(BOOL State)
{
    static BOOL s_State = FALSE;
    if(s_State!=State)
    {
        s_State = State;
        if(State == TRUE)
        {
            Mod_OLEDDispIcon_8x8(24,1,(INT8U*)HighSpeedIcom);
        }
        else
        {
            Mod_OLEDDispIcon_8x8(24,1,(INT8U*)ClearIcom);
        } 
        return TRUE;
    }
    else
        return FALSE;
}

BOOL Mod_OLEDDisp_LowSpeedIcom(BOOL State)
{
    static BOOL s_State = FALSE;
    if(s_State!=State)
    { 
        s_State = State;
        if(State == TRUE)
        {
            Mod_OLEDDispIcon_8x8(24,2,(INT8U*)LowSpeedIcom);
        }
        else
        {
            Mod_OLEDDispIcon_8x8(24,2,(INT8U*)ClearIcom);
        }
        return TRUE;
    }
    else
        return FALSE;
}

BOOL Mod_OLEDDisp_PatrolIcom(BOOL State)
{
    static BOOL s_State = FALSE;
    if(s_State!=State)
    {
        s_State = State;
        if(State == TRUE)
        {
            Mod_OLEDDispIcon_8x8(24,3,(INT8U*)PatrolIcom);
        }
        else
        {
            Mod_OLEDDispIcon_8x8(24,3,(INT8U*)ClearIcom);
        } 
        return TRUE;
    }
    else
        return FALSE;
}

BOOL Mod_OLEDDisp_SpeedNum(INT8U Num)
{
    static INT8U s_Num = 255;
    
    if(Num > 99)
        Num = 99;
    
    if(s_Num!=Num)
    {
        s_Num = Num;
        Mod_OLEDDispNum_32x16(40,s_Num/10);
        Mod_OLEDDispNum_32x16(60,s_Num%10);
        return TRUE;
    }
    else
        return FALSE;
}


//*******************************************************
//函数名称：Display
//功能：显示图案
//参数：Data1,Data2
//*******************************************************
void Display(Uchar Data1,Uchar Data2)
{
	int i,j;     
    for(i=0;i<4;i++)
	 {	
	  Write_Command(0xB0+i);//set pageaddress start adress
	  Write_Command(0x00);  //set lower column start address
	  Write_Command(0x10);  //set higher column start address	  
	  for(j=0;j<64;j++)
	    { 	      
	      Write_Data(Data1);
	      Write_Data(Data2);
	    }	  
     }
     
    
}

//*******************************************************
//函数名称：Display
//功能：显示图案
//参数：Data1,Data2
//*******************************************************
void Display1(Uchar Data1,Uchar Data2)
{
	int i,j;     
    for(i=0;i<4;i++)
	 {	
	  Write_Command(0xB0+i);//set pageaddress start adress
	  Write_Command(0x00);  //set lower column start address
	  Write_Command(0x10);  //set higher column start address	  
	  for(j=0;j<32;j++)
	    { 	      
	      Write_Data(Data1);
	      Write_Data(Data1);    

	      Write_Data(Data2);
	      Write_Data(Data2);
	    
	    }	  
     }
     
    
}




